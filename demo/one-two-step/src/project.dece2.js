window.__require=function t(e,o,i){function n(r,a){if(!o[r]){if(!e[r]){var s=r.split("/");if(s=s[s.length-1],!e[s]){var p="function"==typeof __require&&__require;if(!a&&p)return p(s,!0);if(c)return c(s,!0);throw new Error("Cannot find module '"+r+"'")}}var u=o[r]={exports:{}};e[r][0].call(u.exports,function(t){return n(e[r][1][t]||t)},u,u.exports,t,e,o,i)}return o[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<i.length;r++)n(i[r]);return n}({Block:[function(t,e,o){"use strict";cc._RF.push(e,"a47efUOX45H7Iz2i+DugwtV","Block"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator.ccclass,n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(t,e,o,i){var n=this;this.scheduleOnce(function(){var o=cc.moveBy(t,cc.v2(0,-e));n.node.runAction(o),i()},o)},e=__decorate([i],e)}(cc.Component);o.Block=n,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"da2cbQ71ExP3ZjHaostIxcC","Game"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Stage"),n=t("./OverPanel"),c=cc._decorator,r=c.ccclass,a=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stage=null,e.scoreLabel=null,e.overPanel=null,e.score=0,e}return __extends(e,t),e.prototype.start=function(){this.overPanel.init(this),this.overPanel.hide(),this.startGame(),this.addListeners()},e.prototype.addScore=function(t){this.score+=t,this.scoreLabel.string=this.score+""},e.prototype.startGame=function(){this.score=0,this.scoreLabel.string="0",this.stage.init(this)},e.prototype.overGame=function(){this.overPanel.show(this.score)},e.prototype.restartGame=function(){cc.director.loadScene("game")},e.prototype.returnMenu=function(){cc.director.loadScene("menu")},e.prototype.onBtnOne=function(){this.stage.playerJump(1)},e.prototype.onBtnTwo=function(){this.stage.playerJump(2)},e.prototype.addListeners=function(){var t=this;cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){e.keyCode===cc.macro.KEY.left?t.onBtnOne():e.keyCode===cc.macro.KEY.right&&t.onBtnTwo()},this)},__decorate([a(i.Stage)],e.prototype,"stage",void 0),__decorate([a(cc.Label)],e.prototype,"scoreLabel",void 0),__decorate([a(n.OverPanel)],e.prototype,"overPanel",void 0),e=__decorate([r],e)}(cc.Component);o.Game=s,cc._RF.pop()},{"./OverPanel":"OverPanel","./Stage":"Stage"}],Menu:[function(t,e,o){"use strict";cc._RF.push(e,"7e01bkzfapBObVnLTU/79lD","Menu"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator.ccclass,n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onBtnStart=function(){cc.director.loadScene("game")},e=__decorate([i],e)}(cc.Component);o.Menu=n,cc._RF.pop()},{}],OverPanel:[function(t,e,o){"use strict";cc._RF.push(e,"73dbd16RRxALr6O67RbBDXQ","OverPanel"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,c=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scoreLabel=null,e}return __extends(e,t),e.prototype.init=function(t){this.game=t},e.prototype.onBtnRestart=function(){this.game.restartGame()},e.prototype.onBtnReturnMenu=function(){this.game.returnMenu()},e.prototype.show=function(t){this.node.active=!0,this.scoreLabel.string=t+""},e.prototype.hide=function(){this.node.active=!1},__decorate([c(cc.Label)],e.prototype,"scoreLabel",void 0),e=__decorate([n],e)}(cc.Component);o.OverPanel=r,cc._RF.pop()},{}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"a5b03BOs51FKI/RJFa6xT4q","Player"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,c=i.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.oneStepAudio=null,e.twoStepAudio=null,e.dieAudio=null,e}return __extends(e,t),e.prototype.init=function(t,e,o,i,n){this.stepDistance=t,this.jumpHeight=e,this.jumpDuration=o,this.fallDuration=i,this.fallHeight=n,this.canJump=!0,this.index=0},e.prototype.jump=function(t){var e=this;this.canJump=!1,this.index+=t;var o=cc.jumpBy(this.jumpDuration,cc.v2(t*this.stepDistance,0),this.jumpHeight,1),i=cc.callFunc(function(){e.canJump=!0});this.node.runAction(cc.sequence(o,i)),1===t?cc.audioEngine.play(this.oneStepAudio,!1,1):2===t&&cc.audioEngine.play(this.twoStepAudio,!1,1)},e.prototype.die=function(){this.canJump=!1;var t=cc.moveBy(this.fallDuration,cc.v2(0,-this.fallHeight));this.node.runAction(t),cc.audioEngine.play(this.dieAudio,!1,1)},__decorate([c({type:cc.AudioClip})],e.prototype,"oneStepAudio",void 0),__decorate([c({type:cc.AudioClip})],e.prototype,"twoStepAudio",void 0),__decorate([c({type:cc.AudioClip})],e.prototype,"dieAudio",void 0),e=__decorate([n],e)}(cc.Component);o.Player=r,cc._RF.pop()},{}],Stage:[function(t,e,o){"use strict";cc._RF.push(e,"54506yZt+5NQaeXMfR3czy2","Stage"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Player"),n=t("./Block"),c=cc._decorator,r=c.ccclass,a=c.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.stepDistance=200,e.jumpHeight=100,e.jumpDuration=.3,e.fallHeight=500,e.fallDuration=.3,e.initStayDuration=2,e.minStayDuration=.3,e.speed=.1,e.player=null,e.blockPrefab=null,e.lastBlock=!0,e.lastBlockX=0,e.game=null,e}return __extends(e,t),e.prototype.init=function(t){this.game=t,this.stayDuration=this.initStayDuration,this.player.init(this.stepDistance,this.jumpHeight,this.jumpDuration,this.fallDuration,this.fallHeight),this.blockList=[],this.addBlock(cc.v2(0,0));for(var e=0;e<5;e++)this.randomAddBlock()},e.prototype.addSpeed=function(){this.stayDuration-=this.speed,this.stayDuration<=this.minStayDuration&&(this.stayDuration=this.minStayDuration),cc.log(this.stayDuration)},e.prototype.playerJump=function(t){var e=this;if(this.player.canJump){if(this.player.jump(t),this.moveStage(t),!this.hasBlock(this.player.index))cc.log("die"),this.scheduleOnce(function(){e.player.die(),e.game.overGame()},this.jumpDuration);else{var o=this.player.index;this.blockList[o].init(this.fallDuration,this.fallHeight,this.stayDuration,function(){e.player.index===o&&(e.player.die(),e.game.overGame())}),this.game.addScore(1===t?1:3)}this.player.index%10==0&&this.addSpeed()}},e.prototype.moveStage=function(t){var e=cc.moveBy(this.jumpDuration,cc.v2(-this.stepDistance*t,0));this.node.runAction(e);for(var o=0;o<t;o++)this.randomAddBlock()},e.prototype.randomAddBlock=function(){!this.lastBlock||Math.random()>.5?this.addBlock(cc.v2(this.lastBlockX+this.stepDistance,0)):this.addBlank(),this.lastBlockX=this.lastBlockX+this.stepDistance},e.prototype.addBlock=function(t){var e=cc.instantiate(this.blockPrefab);this.node.addChild(e),e.position=t,this.blockList.push(e.getComponent(n.Block)),this.lastBlock=!0},e.prototype.addBlank=function(){this.blockList.push(null),this.lastBlock=!1},e.prototype.hasBlock=function(t){return null!==this.blockList[t]},__decorate([a(cc.Integer)],e.prototype,"stepDistance",void 0),__decorate([a(cc.Integer)],e.prototype,"jumpHeight",void 0),__decorate([a(cc.Float)],e.prototype,"jumpDuration",void 0),__decorate([a(cc.Integer)],e.prototype,"fallHeight",void 0),__decorate([a(cc.Float)],e.prototype,"fallDuration",void 0),__decorate([a(cc.Float)],e.prototype,"initStayDuration",void 0),__decorate([a(cc.Float)],e.prototype,"minStayDuration",void 0),__decorate([a(cc.Float)],e.prototype,"speed",void 0),__decorate([a(i.Player)],e.prototype,"player",void 0),__decorate([a(cc.Prefab)],e.prototype,"blockPrefab",void 0),e=__decorate([r],e)}(cc.Component);o.Stage=s,cc._RF.pop()},{"./Block":"Block","./Player":"Player"}]},{},["Block","Game","Menu","OverPanel","Player","Stage"]);